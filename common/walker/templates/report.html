<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Walker Report</title>
    <link rel="stylesheet" href="https://unpkg.com/@patternfly/patternfly/patternfly.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
</head>
<body>
<h1 class="pf-v5-c-title pf-m-4xl">
    Walker Report <span class="pf-v5-c-timestamp">
  <time
          class="pf-v5-c-timestamp__text"
          datetime="{{current_time}}"
  >{{current_time}}</time>
</span>
</h1>

<h2>Uploaded <span class="badge text-bg-danger rounded-pill">{{report.numer_of_items}}</span> files</h2>


<div
        class="pf-v5-l-flex pf-m-gutter"
        style="--pf-v5-l-gallery--GridTemplateColumns--max-on-md: 280px; --pf-v5-l-gallery--GridTemplateColumns--max-on-lg: 320px; --pf-v5-l-gallery--GridTemplateColumns--max-on-2xl: 400px;"
>
    {% for phase, messages in report.messages %}
    <h2>{{phase}}:</h2>
    <div class="pf-v5-l-flex__item">
    <table
            class="pf-v5-c-table pf-m-grid-md"
            role="grid"
            id="table-basic"
    >
        <thead class="pf-v5-c-table__thead">
        <tr class="pf-v5-c-table__tr" role="row">
            <th class="pf-v5-c-table__th" role="columnheader" scope="col" style="width: 25%;">File</th>
            <th class="pf-v5-c-table__th" role="columnheader" scope="col" style="width: 15%;">Phase</th>
            <th class="pf-v5-c-table__th" role="columnheader" scope="col" style="width: 15%;">Severity</th>
            <th class="pf-v5-c-table__th" role="columnheader" scope="col" style="width: 45%;">Message</th>
        </tr>
        </thead>

        <tbody class="pf-v5-c-table__tbody" role="rowgroup">
        {% for file, message_list in messages %}
        {% for msg in message_list %}
        <tr class="pf-v5-c-table__tr">
            <td class="pf-v5-c-table__td" role="cell" data-label="File name">{{file}}</td>
            <td class="pf-v5-c-table__td" role="cell" data-label="Branches">{{phase}}</td>
            <td class="pf-v5-c-table__td" role="cell" data-label="Pull requests">{{msg.severity}}</td>
            <td class="pf-v5-c-table__td" role="cell" data-label="Workspaces">{{msg.message}}</td>
        </tr>
        {% endfor %}
        {% endfor %}
        </tbody>
    </table>
    </div>
    {% endfor %}


</div>
</body>
</html>
